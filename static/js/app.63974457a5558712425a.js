webpackJsonp([1,0],[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=n(17),r=i(o),a=n(136),s=i(a),l=n(47),c=i(l),u=n(1),d=n(50),f=i(d);n(110),n(74),n(133),r.default.filter("translate",function(e){return"translate("+e+")"}),r.default.filter("embrace",function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return t+"("+e+(i.length>0?","+i.join(","):"")+")"}),r.default.filter("timeDisplay",u.timeDisplay),r.default.filter("percent",u.percent),r.default.mixin({methods:{$$emit:function(e,t){var n=Array.prototype.slice.call(t);n.unshift(e),this.$emit.apply(this,n)},$fire:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];c.default.$emit.apply(c.default,[e].concat(n))},$listen:function(e,t){c.default.$on(e,t),this.$eventStack||(this.$eventStack=[],this.$eventStack.push({name:e,handler:t}))},getTranslate:function(e,t){return"translate("+e+", "+t+")"}},beforeDestroy:function(){this.$eventStack&&_.isArray(this.$eventStack)&&this.$eventStack.forEach(function(e){c.default.$off(e.name,e.handler)})}});var p=n(48)(f.default);new r.default({router:p,store:f.default,el:"app",template:"<App/>",components:{App:s.default}})},function(e,t,n){"use strict";function i(e,t){var n=document.createElement("canvas");n.width=t,n.height=t;var i=n.getContext("2d");i.fillStyle="#000000",i.font=t+"px FontAwesome",i.textAlign="center",i.textBaseline="middle",i.fillText(e,t/2,t/2);var o=n.toDataURL("image/png");return o}function o(e){return(0,f.sprintf)("%0.1f%%",100*e)}function r(){return Math.random().toString(36).substring(7)}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=_.reduce(e,function(e,t){return e[""+t]=""+n+t,e[t+"_request"]=""+n+t+"_request",e[t+"_failed"]=""+n+t+"_failed",e},{});return i=_.reduce(t,function(e,t){return e[""+t]=""+n+t,e},i)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=_.keys(e);return _.reduce(n,function(n,i){return n[t+i]=e[i],n},{})}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return _.isArray(e)?_.reduce(e,function(e,n){return e[n]=t+n,e},{}):_.reduce(e,function(e,n,i){return e[n]=t+i,e},{})}function c(e,t){return(0,p.mapGetters)(l(e,t))}function u(e,t){return(0,p.mapActions)(l(e,t))}function d(e){return _.reduce(_.keys(e),function(e,t){return e[t]=function(e){return e[t]},e},{})}Object.defineProperty(t,"__esModule",{value:!0}),t.genCursorUrlData=i,t.percent=o,t.uniqueKey=r,t.resourceMaker=a,t.resourceMapping=s,t.resourceUnpack=l,t.resourceMapGetters=c,t.resourceMapActions=u,t.generateGetterCluster=d;var f=n(135),p=n(45)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,i){for(var o={},r={x:t.column-Math.floor((n-1)/2)-e.translation.x,y:t.row-Math.floor((n-1)/2)-e.translation.y},a=0;a<n;a++)for(var s=0;s<n;s++)o[r.x+a+", "+(r.y+s)]={x:r.x+a,y:r.y+s,color:i.hex};e.data=(0,v.default)({},e.data,o)}function r(e,t,n){for(var i={x:t.column-Math.floor((n-1)/2)-e.translation.x,y:t.row-Math.floor((n-1)/2)-e.translation.y},o=0;o<n;o++)for(var r=0;r<n;r++)delete e.data[i.x+o+", "+(i.y+r)];e.data=(0,v.default)({},e.data)}function a(e,t){if(e.currentLayer&&e.mousedown){var n=l(e.layers,e.currentLayer);if(!k(n))return;var i=b.items[e.currentTool],a=_.clone(e.mousePosition);if(t.shiftKey){var s=e.mousedownPosition,c=s.column-a.column,u=s.row-a.row;Math.abs(c)>Math.abs(u)?a.row=s.row:a.column=s.column}"pencil"===i.name?o(n,a,e.pencilSize,e.pencilColor):"eraser"===i.name&&r(n,a,e.eraserSize)}}function s(e){if(e.currentLayer&&e.mousedown){var t=b.items[e.currentTool];if("move"===t.name){var n=_.find(e.chains,function(t){return t.indexOf(e.currentLayer)>-1});n||(n=[e.currentLayer]),n.forEach(function(t,n){var i=l(e.layers,t),o=e.mousePosition.column-e.mousedownPosition.column,r=e.mousePosition.row-e.mousedownPosition.row;i.translation={x:e.oldLayerTranslations[i.id].x+o,y:e.oldLayerTranslations[i.id].y+r}})}}}function l(e,t){return _.find(e,{id:t})}function c(){var e={name:"未命名",translation:{x:0,y:0},data:{},id:(0,w.uniqueKey)(),status:{visible:!0,only:!1,force:!1}};return e}function u(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _.reduce(e,function(e,n){return(t||k(n))&&_.values(n.data).forEach(function(t){var i=t.x+n.translation.x,o=t.y+n.translation.y;i<0||i>=M.editorSize.columns||o<0||o>=M.editorSize.rows||(e[i+", "+o]={x:i,y:o,color:t.color})}),e},{})}function d(e){return _.find(e.layers,{id:e.currentLayer})}function f(e){var t=c();return t.data=_.cloneDeep(e.data),t.name=e.name+" 副本",t}function p(e,t){var n=_.findIndex(e.layers,{id:t});e.layers.splice(n,1),t===e.currentLayer&&(e.currentLayer=null),t===e.onlyLayer&&(e.onlyLayer=null,e.layers.forEach(function(e){e.status.force=!1}))}var h=n(29),v=i(h),m=n(4),y=i(m),g=n(28),w=n(1),b=n(11),C="beadApp_",x=c(),A=c(),M={currentTool:2,editorZoom:1,editorViewPort:{x1:0,x2:10,y1:0,y2:10},editorSize:{columns:10,rows:10},editorDimension:{width:300,height:300},editorMargin:[25,25],altKey:!1,mousedown:!1,mousedownPosition:null,mousedownViewPort:null,mouseInCanvas:!1,oldLayerTranslations:null,mousePosition:{x:0,y:0,column:0,row:0},pencilColor:{hex:"#000000"},pencilSize:1,eraserSize:1,layers:[x,A],currentLayer:x.id,onlyLayer:null,chains:[]},S=(0,y.default)({},(0,w.generateGetterCluster)(M)),P={},L={};P.setCurrentTool=function(e,t){var n=e.commit;n(g.beadApp.setCurrentTool,t)},L[g.beadApp.setCurrentTool]=function(e,t){e.currentTool=t},P.setEditorZoom=function(e,t){var n=e.commit;n(g.beadApp.setEditorZoom,t)},L[g.beadApp.setEditorZoom]=function(e,t){e.editorZoom=t},P.setEditorViewPort=function(e,t){var n=e.commit;n(g.beadApp.setEditorViewPort,t)},L[g.beadApp.setEditorViewPort]=function(e,t){e.editorViewPort=t},P.setEditorSize=function(e,t){var n=e.commit;n(g.beadApp.setEditorSize,t)},L[g.beadApp.setEditorSize]=function(e,t){e.editorSize=t,e.editorZoom=1,e.editorViewPort={x1:0,x2:t.columns,y1:0,y2:t.rows}},P.setEditorDimension=function(e,t){var n=e.commit;n(g.beadApp.setEditorDimension,t)},L[g.beadApp.setEditorDimension]=function(e,t){e.editorDimension=t},P.setEditorMargin=function(e,t){var n=e.commit;n(g.beadApp.setEditorMargin,t)},L[g.beadApp.setEditorMargin]=function(e,t){e.editorMargin=t},P.setAltKey=function(e,t){var n=e.commit;n(g.beadApp.setAltKey,t)},L[g.beadApp.setAltKey]=function(e,t){e.altKey=t};var k=_.partial(function(e,t){return e.onlyLayer?e.onlyLayer===t.id||t.status.force:t.status.visible},M);P.setMouseDown=function(e,t){var n=e.commit;n(g.beadApp.setMouseDown,t)},L[g.beadApp.setMouseDown]=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isDown,i=t.position,o=t.viewPort,r=t.event;e.mousedown=n,e.mousedownPosition=i,e.mousedownViewPort=o,n?e.oldLayerTranslations=_.reduce(e.layers,function(e,t){return e[t.id]=(0,v.default)({},t.translation),e},{}):e.oldLayerTranslations=null,a(e,r)},P.setMousePosition=function(e,t){var n=e.commit;n(g.beadApp.setMousePosition,t)},L[g.beadApp.setMousePosition]=function(e,t){var n=t.position,i=t.event;e.mousePosition=n,a(e,i),s(e)},P.setPencilColor=function(e,t){var n=e.commit;n(g.beadApp.setPencilColor,t)},L[g.beadApp.setPencilColor]=function(e,t){e.pencilColor=t},P.setPencilSize=function(e,t){var n=e.commit;n(g.beadApp.setPencilSize,t)},L[g.beadApp.setPencilSize]=function(e,t){e.pencilSize=t},P.setEraserSize=function(e,t){var n=e.commit;n(g.beadApp.setEraserSize,t)},L[g.beadApp.setEraserSize]=function(e,t){e.eraserSize=t},P.insertLayer=function(e,t){var n=e.commit;n(g.beadApp.insertLayer,t)},L[g.beadApp.insertLayer]=function(e,t){var n=0;t&&(n=_.findIndex(e.layers,{id:t}));var i=c();e.layers.splice(n,0,i),e.currentLayer=i.id},P.copyLayer=function(e,t){var n=e.commit;n(g.beadApp.copyLayer,t)},L[g.beadApp.copyLayer]=function(e,t){var n=_.find(e.layers,{id:t});if(n){var i=f(n),o=_.findIndex(e.layers,{id:t});e.layers.splice(o,0,i),e.currentLayer=i.id}},P.removeLayer=function(e,t){var n=e.commit;n(g.beadApp.removeLayer,t)},L[g.beadApp.removeLayer]=function(e,t){p(e,t)},P.setLayers=function(e,t){var n=e.commit;n(g.beadApp.setLayers,t)},L[g.beadApp.setLayers]=function(e,t){e.layers=t},P.setCurrentLayer=function(e,t){var n=e.commit;n(g.beadApp.setCurrentLayer,t)},L[g.beadApp.setCurrentLayer]=function(e,t){e.currentLayer=t},P.toggleCurrentLayer=function(e,t){var n=e.commit;n(g.beadApp.toggleCurrentLayer,t)},L[g.beadApp.toggleCurrentLayer]=function(e,t){t===e.currentLayer?e.currentLayer=null:e.currentLayer=t},P.toggleLayerStatus=function(e,t){var n=e.commit;n(g.beadApp.toggleLayerStatus,t)},L[g.beadApp.toggleLayerStatus]=function(e,t){var n=t.status,i=t.id,o=_.find(e.layers,{id:i});if(o){var r=!o.status[n];"only"===n&&(e.onlyLayer=r?i:null,e.layers.forEach(function(e){e.status.force=!1})),o.status[n]=r}},S.currentChain=function(e){return e.currentLayer?_.find(e.chains,function(t){return t.indexOf(e.currentLayer)>-1}):null},S.chainStatuses=function(e){return _.reduce(e.layers,function(t,n){if(n.id===e.currentLayer)t[n.id]=!0;else{var i=S.currentChain(e);t[n.id]=!!i&&i.indexOf(n.id)>-1}return t},{})},P.chainLayer=function(e,t){var n=e.commit;n(g.beadApp.chainLayer,t)},L[g.beadApp.chainLayer]=function(e,t){var n=_.find(e.chains,function(t){return t.indexOf(e.currentLayer)>-1});n||(n=[e.currentLayer],e.chains.push(n));var i=_.find(e.chains,function(e){return e.indexOf(t)});i&&n!==i&&_.pull(i,t);var o=n.indexOf(t);o>-1?n.splice(o,1):n.push(t),e.chains=e.chains.filter(function(e){return e.length>1})},P.updateLayer=function(e,t){var n=e.commit;n(g.beadApp.updateLayer,t)},L[g.beadApp.updateLayer]=function(e,t){var n=t.id,i=t.data,o=_.find(e.layers,{id:n});o&&_.assign(o,i)},P.toggleMouseInOut=function(e,t){var n=e.commit;n(g.beadApp.toggleMouseInOut,t)},L[g.beadApp.toggleMouseInOut]=function(e,t){e.mouseInCanvas=t},P.removeColor=function(e,t){var n=e.commit,i=t.color;n(g.beadApp.removeColor,i)},L[g.beadApp.removeColor]=function(e,t){},P.generateLayerFromColor=function(e,t){var n=e.commit,i=t.color;n(g.beadApp.generateLayerFromColor,i)},L[g.beadApp.generateLayerFromColor]=function(e,t){},P.mergeLayers=function(e,t){var n=e.commit;n(g.beadApp.mergeLayers,t)},L[g.beadApp.mergeLayers]=function(e,t){var n=t.currentLayer,i=t.chain,o=e.layers.filter(function(e){return i.indexOf(e.id)>-1}).reverse(),r=u(o),a=d(e);a.data=r,a.translation={x:0,y:0};var s=_.findIndex(e.chains,function(e){return e.indexOf(n)>-1});s>-1&&e.chains.splice(s,1),o.filter(function(t){return t.id!==e.currentLayer}).forEach(function(t){return p(e,t.id)})},S.usedColors=function(e){return _.reduce(e.layers,function(e,t){return _.values(t.data).forEach(function(t){_.indexOf(e,t.color)===-1&&e.push(t.color)}),e},[])},S.colorStatics=function(e){var t=u(e.layers.slice().reverse()),n=_.reduce(_.values(t),function(e,t){return _.isUndefined(e[t.color])?e[t.color]=1:e[t.color]+=1,e},{});return{colors:n,flatternLayer:t}},e.exports={state:M,getters:(0,w.resourceMapping)(S,C),actions:(0,w.resourceMapping)(P,C),mutations:L,prefix:C,isLayerVisible:k,findLayer:l}},,,,,,,,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.items=[{icon:"fa-mouse-pointer",name:"pointer",hotKey:"s",code:"",tips:"选择(S)",cursor:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAwElEQVQ4T5XSP2oCQRQH4G8bsfEsFmJrLpHSwkKbgJUScgdJE7BLSBPwBBaW8QYiVrYWYpsiKWVhJYvMzs5ONX/e+/gxvMz/WqGDR/yV7qPbrPT6hinWTZAQkJvJSBWQjMSAJKQOqEVSgCiSClQiTYAg0hTIkTleb/OTCozwixb22DUBftDDMTTTVQkmeMCwaFrguQ5Y4gljfGCA76Lpgi7O90g5wQtO+CqK2tiiX5zzVO8xIJQw/7xPbDDD4b7oCmIJMhEKFfl2AAAAAElFTkSuQmCC"), auto'},{icon:"fa-search",name:"zoom",hotKey:"z",code:"",out:"",tips:"缩放(Z)",cursor:"zoom-in",outCursor:"zoom-out"},{icon:"fa-pencil",name:"pencil",hotKey:"p",code:"",tips:"画笔(P)",cursor:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA2klEQVQ4T6XTMUoDQRiG4WcRrdKbNlewsLHKMewC1iZipeAJRCzEpEoTbGwCAQ9goZAuhwnBwkJkJAs/Yza7IdNN8b7fN/PPFPZcxQ78KR7xgFnJNRWc4TOEneM17ZsIOrhCP2v7J6kTlMnP+MZ1kHygu02Q184l97ipEuRwGZwkLawwwM8mQQ4vcBKq9zCpmkIdnGrfpuRNgp3hOMaqM5dB/5Jjg3QP6VF84Q3TbN6VcGwwxDHu0Mb7WrIVjoInXGKEOV5QC0fBGBeheiM4Co5wuBYcYNn0l/4CjcEyFV8I/vIAAAAASUVORK5CYII=") 0 32, auto'},{icon:"fa-eraser",name:"eraser",hotKey:"e",code:"",tips:"橡皮(E)",cursor:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA50lEQVQ4T6XToUtDURTH8c8EwbpislgFkyzYDOsixtksBu37D4SBUW3CEAzC9ge4YjAMhsWo1aDdpOLkglcel713H7zTLvf8vud3zrm3pWG0GurlAJs4x0dJoZ8qwBoesVrlsgzQxgM2ci0uAizjDjs5MY5TQDhf4KiGeIB+CujjtIb4Fj18FwEHuK4hfsZW3EwEdDHBGW4Q5hDjE+sY4RUdvMXLAAi7fsK/rcTFEobY/av8UrwPgHfMsIevRFwc6jamaYshYY5L3GOlkBBgQXSCfYwXzSc6qHpth7gqG27uL2SX0hjwC6NKJS9S0OoxAAAAAElFTkSuQmCC") 0 32, auto'},{icon:"fa-arrows",name:"move",hotKey:"m",code:"",tips:"位移(M)",cursor:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABI0lEQVQ4T43TsStGURgG8N+H2cJgFEpJWMRoUhYGZn+E9dswKotJIpOyk4FkYFAGK/VZTLIzIL1f5+jSvdd3p3PP+zzPec/zvKeh+uvFOfowg9cyaKOCn8nTqd6qEikT6MIF5v6IP2AS78X9MoHYW8UaJhJ4H7fYw+d/Ark+iKf0M4X7Og/ynbdxlIAjeCwRWMBO9iTaLRq2joNEGsVZWi/jLq1XsIW2sSFwWWJYTbq/Sq0QCHNyXJ0SM+45BAZwjSGcoIluDOM4IWPvFF9YxAZeMJtjzCLhwWEiVaWwhN0gR0rFOYhTixnXxdiDjzioapTnky+bqZtoOcy+Stf48apMINRvSoyN2Mbx1skkhifxHsYSuG1YYTJrO8jFLNJfRQ7gN3YgOwZiKOXiAAAAAElFTkSuQmCC"), auto'},{icon:"fa-hand-rock-o",name:"hand",hotKey:"h",code:"",grab:"",tips:"拖动(H)",cursor:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABcklEQVQ4T5XSzUtVcRDG8c+NkKgEg8paGC3cWBEI0TpIcuUbtChCiPAuImpREIJSQVF7QVepIELiy0YKWkVLU8QghSBaFfQH9ELQCzEyBy6Hq9LA4RzmN7/vmWeeqagfu3Efw3ncj+l6pZVSci+e4Fbmb+BwwiJ1GyP4U9wrAy5iAvdwEyfRjDks4iFOYWMrQNCPoxvR9gscxX6s4B2+4xGe42+5gwLQg8t4mYAmLOMtTuTf43zmfwCrGMQDPE1ItQAcwj5M4itqOziCAwjANYzlIENqXwCulCyaxaWcQehsQSPWcBWj+US+NwAx0Xks4BnWU/8e/EADfmEXIhdDLGa1CfiIKl6hPbs5Xet1nQUqAJsSptCJM/iULcd7uwjAT9wNwEG8wRecw+8dLseav065o4ULZxMyhMc7AMKR9+nUUu0eXE+Lzuc8tuK04gOOheRaQHzHzl9AFz6jvGjhwh10oA3fygXRXugLF7aLAYxHwT97FE0c0WkWQgAAAABJRU5ErkJggg=="), auto',grabbingCursor:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABOklEQVQ4T6XTTyilYRTH8c8ttmpKMc2GGiV/FtRENkzNRpGk/IkNFrOzoSk7yk6zY0U2gyxtlIX8V66SUkoWkwWzmimFpIz01vvebm/vval7ds95er7POb/zOykFRqrA95IAH1CDYoygFDsI8lf4hf/Rx3HAR/zJquoeF2iO5TYwjctsQCW+YxAtGMYyrvET4xhDJypCYHUE6MJ6mFzDAHqwh3/4im30YxNl2EcGsIhnzOAHJrL7TBC6CodxwBnmMYlZvOSZ0GccxQFpLGAIq3jNA/iGlTigPOzx4R3emEIjuiMRv+AEx2jHXR5IEXYRiD2XPcaAeIrfaMLfHJBPuAm9kY4bqR7nOEBbDh0awlHWBp8kWbk1LLEPtwlV9KIDdXhKApRgC4EuuWIUS8Flvm0MQJmliZEeo/MbEns/XUt+c5UAAAAASUVORK5CYII="), auto'}]},,,,,,,,,,,,,,,,function(e,t,n){var i,o;n(114),i=n(55);var r=n(159);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-2a5091ac",e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beadApp=t.foo=void 0;var i=n(1);t.foo=(0,i.resourceMaker)([],["add","get","list","remove","removeAll"],"foo/"),t.beadApp=(0,i.resourceMaker)([],["setCurrentTool","setEditorZoom","setEditorViewPort","setEditorSize","setEditorDimension","setEditorMargin","setAltKey","setMouseDown","setMousePosition","setPencilColor","setPencilSize","setEraserSize","insertLayer","removeLayer","setLayers","setCurrentLayer","toggleCurrentLayer","toggleLayerStatus","copyLayer","chainLayer","updateLayer","toggleMouseInOut","removeColor","generateLayerFromColor","mergeLayers"],"bead_app/")},,,,,,,,,,,,,,,,function(e,t,n){var i,o;n(120),i=n(61);var r=n(165);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-624c103e",e.exports=i},,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DialogEvents={Show:"dialog:show",Shown:"dialog:shown",Hide:"dialog:hide",Hidden:"dialog:hidden",ButtonClick:"dialog:btn-click"}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),r=i(o);t.default=new r.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=n(17),r=i(o),a=n(178),s=i(a),l=n(180),c=n(155),u=i(c),d=n(154),f=i(d),p=n(153),h=i(p);r.default.use(s.default);var v=[{path:"/",component:u.default,name:"home"},{path:"/bead-editor2",component:u.default,name:"home2"},{path:"/foo",component:f.default,name:"foo",children:[{path:"bar",component:h.default,name:"bar"}]},{path:"*",redirect:"/bead-editor2"}];e.exports=function(e){var t=new s.default({mode:"history",scrollBehavior:function(e,t,n){return{x:0,y:0}},linkActiveClass:"current",routes:v});return t.beforeEach(function(e,t,n){n()}),t.afterEach(function(e){}),window.router=t,(0,l.sync)(e,t),t}},function(e,t,n){"use strict";var i=n(28),o=n(1),r="foo_",a={items:[]},s={items:function(e){return e.items}},l={},c={};l.add=function(e,t){var n=e.commit;n(i.foo.add,t)},c[i.foo.add]=function(e,t){e.items.push(t)},l.removeAll=function(e){var t=e.commit;t(i.foo.removeAll)},c[i.foo.removeAll]=function(e){e.items=[]},e.exports={state:a,getters:(0,o.resourceMapping)(s,r),actions:(0,o.resourceMapping)(l,r),mutations:c,prefix:r}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(73),r=i(o),a=n(17),s=i(a),l=n(45),c=i(l),u=n(181),d=i(u),f=n(49),p=i(f),h=n(2),v=i(h);s.default.use(c.default);var m=!1,y={count:0},g={increment:function(e){e.count++},decrement:function(e){e.count--}},_={increment:function(e){var t=e.commit;return t("increment")},decrement:function(e){var t=e.commit;return t("decrement")},incrementIfOdd:function(e){var t=e.commit,n=e.state;(n.count+1)%2===0&&t("increment")},incrementAsync:function(e){var t=e.commit;return new r.default(function(e,n){setTimeout(function(){t("increment"),e()},1e3)})}},w={evenOrOdd:function(e){return e.count%2===0?"even":"odd"}};t.default=new c.default.Store({state:y,mutations:g,actions:_,getters:w,modules:{foo:p.default,beadApp:v.default},strict:m,plugins:m?[(0,d.default)({collapsed:!1,ignored:function(e){return["bead_app/setMousePosition","bead_app/setEditorViewPort","bead_app/setEditorDimension","bead_app/setEditorSize","bead_app/setEditorMargin","bead_app/toggleMouseInOut"].indexOf(e)>-1}})]:[]})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app",components:{},mounted:function(){var e=document.querySelector("#landing_loading");e&&(e.classList.add("done"),setTimeout(function(e){e.parentNode.removeChild(e)},1500,e))}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=i(o),a=n(142),s=i(a),l=n(152),c=i(l),u=n(146),d=i(u),f=n(150),p=i(f),h=n(138),v=i(h),m=n(148),y=i(m),g=n(11),w=n(1),b=n(2),C=b.prefix,x=b.state;t.default={name:"bead-app",components:{Editor:s.default,Toolbar:c.default,InfoPanel:d.default,ToolbarPanel:p.default,ColorMappingPanel:v.default,LayersPanel:y.default},data:function(){return{editorSuggestUnitWidth:30,editorMaxUnitWidth:70,windowWidth:window.document.documentElement.clientWidth,windowHeight:window.document.documentElement.clientHeight,rightColumnWidth:240,leftMargin:35,panels:[{name:"canvas",className:"fa-picture-o"},{name:"toolbar",className:"fa-wrench"},{name:"color-mapping",className:"fa-superpowers"},{name:"layers",className:"fa-window-restore"}],currentPanelIndex:3}},computed:(0,r.default)({},(0,w.resourceMapGetters)(_.keys(x),C),{editorInnerSize:function(){return{width:this.editorDimension.width-_.sum(this.editorMargin),height:this.editorDimension.height-_.sum(this.editorMargin)}},editorUnitWidth:function(){return Math.min(this.editorSuggestUnitWidth,this.editorInnerSize.width/this.editorSize.columns,this.editorInnerSize.height/this.editorSize.rows)},editorCellWidth:function(){return this.editorUnitWidth*this.editorZoom},editorZoomMin:function(){return this.editorUnitWidth<=this.editorSuggestUnitWidth?1:this.editorSuggestUnitWidth/Math.min(this.editorInnerSize.width/this.editorSize.columns,this.editorInnerSize.height/this.editorSize.rows)},editorZoomMax:function(){return this.editorMaxUnitWidth/this.editorUnitWidth},canvasRect:function(){var e=this.editorCellWidth*this.editorSize.columns,t=this.editorCellWidth*this.editorSize.rows,n=e<=this.editorInnerSize.width?e:this.editorInnerSize.width,i=t<=this.editorInnerSize.height?t:this.editorInnerSize.height;return{x:(this.editorDimension.width-n)/2,y:(this.editorDimension.height-i)/2,width:n,height:i}},editorCursor:function(){var e=g.items[this.currentTool];return e.cursor?"zoom"===e.name&&this.altKey?e.outCursor:"hand"===e.name&&this.mousedown?e.grabbingCursor:e.cursor:null}}),methods:(0,r.default)({},(0,w.resourceMapActions)(["setEditorViewPort","setEditorSize","setEditorDimension","setEditorZoom","setEditorMargin"],C),{editorZoomAt:function(e,t){var n=this.editorZoom;n+=e?.25:-.25,n=n>this.editorZoomMax?this.editorZoomMax:n<this.editorZoomMin?this.editorZoomMin:n,this.setEditorZoom(n);var i=this.calculateNewViewPortRange(n,t.x,this.editorViewPort.x1,this.editorViewPort.x2,this.editorSize.columns,this.editorInnerSize.width),o=this.calculateNewViewPortRange(n,t.y,this.editorViewPort.y1,this.editorViewPort.y2,this.editorSize.rows,this.editorInnerSize.height),r={x1:i[0],x2:i[1],y1:o[0],y2:o[1]};this.setEditorViewPort(r)},calculateNewViewPortRange:function(e,t,n,i,o,r){var a=this.editorUnitWidth*e*o;if(Math.floor(a)<=r)return[0,o];var s=(t-n)/(i-n)*r,l=t-s/(this.editorUnitWidth*e),c=(i-t)/(i-n)*r,u=t+c/(this.editorUnitWidth*e);if(l<0){var d=l;l=0,u+=-d}if(u>o){var f=u;u=o,l-=f-o}return[l,u]},moveEditorViewPort:function(e){var t=e.px-this.mousedownPosition.px,n=e.py-this.mousedownPosition.py,i=(this.mousedownViewPort.x1*this.editorCellWidth-t)/this.editorCellWidth,o=this.mousedownViewPort.x2-this.mousedownViewPort.x1,r=(this.mousedownViewPort.y1*this.editorCellWidth-n)/this.editorCellWidth,a=this.mousedownViewPort.y2-this.mousedownViewPort.y1;i=i<0?0:i,i=i>this.editorSize.columns-o?this.editorSize.columns-o:i,r=r<0?0:r,r=r>this.editorSize.rows-a?this.editorSize.rows-a:r;var s=i+o,l=r+a,c={x1:i,x2:s,y1:r,y2:l};this.setEditorViewPort(c)},handleWindowResize:function(){this.windowHeight=window.document.documentElement.clientHeight,this.windowWidth=window.document.documentElement.clientWidth},handleCanvasClick:function(e,t){switch(g.items[this.currentTool].name){case"zoom":this.editorZoomAt(!e.altKey,t)}},handleToolbarItemDblclick:function(){"zoom"===g.items[this.currentTool].name&&(this.setEditorZoom(1),this.setEditorViewPort({x1:0,y1:0,x2:this.editorSize.columns,y2:this.editorSize.rows}))},handleCanvasMouseMove:function(e){"hand"===g.items[this.currentTool].name&&this.mousedown&&this.moveEditorViewPort(e)},handleChangePanel:function(e){this.currentPanelIndex=e}}),created:function(){this.$listen("bead-canvas:click",this.handleCanvasClick),this.$listen("toolbar:itemDblclick",this.handleToolbarItemDblclick),this.$listen("bead-canvas:mousemove",this.handleCanvasMouseMove)},mounted:function(){var e=this;this.$nextTick(function(){e.setEditorDimension({width:800,height:800}),e.setEditorSize({columns:52,rows:52}),e.setEditorMargin([30,30]),$(window).on("resize",e.handleWindowResize)})},beforeDestroy:function(){$(window).off("resize",this.handleWindowResize)}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=i(o),a=n(1),s=n(139),l=i(s),c=n(2),u=c.prefix;t.default={name:"layers-panel",components:{ResetColorDialog:l.default},data:function(){return{height:0}},computed:(0,r.default)({},(0,a.resourceMapGetters)(["colorStatics"],u)),methods:(0,r.default)({},(0,a.resourceMapActions)(["removeColor","generateLayerFromColor"],u),{handleResize:function(){var e=window.document.documentElement.clientHeight,t=e-$("#panel-tabs").get(0).getBoundingClientRect().height-$(".color-mapping-panel .panel-heading").get(0).getBoundingClientRect().height;this.height=t},handleResetColorDialogOpen:function(){console.log(this.$refs.resetColorDialog),this.$refs.resetColorDialog.show()}}),created:function(){$(window).on("resize",this.handleResize)},mounted:function(){this.$nextTick(this.handleResize)},beforeDestroy:function(){$(window).off("resize",this.handleResize)}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(27),r=i(o),a=n(43);t.default={name:"reset-color-dialog",components:{"bs-dialog":r.default,"color-picker":a.Chrome},data:function(){return{color:{hex:"#000000"}}},computed:{},methods:{handleDialogButton:function(){},show:function(){this.$refs.dialog.show()},handleColorChange:function(){}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(46);t.default={name:"dialog",props:{title:{type:String,default:""},buttons:{type:Array,default:function(){return[{label:"关闭",type:"default",close:!0,name:"cancel"},{label:"保存",type:"primary",name:"save"}]}},dialogId:{type:String,required:!0},autoShow:{type:Boolean,default:!1}},data:function(){return{}},methods:{$dialog:function(){return $("#"+this.dialogId)},show:function(){this.$dialog().modal()},toggle:function(){this.$dialog().modal("toggle")},close:function(){this.$dialog().modal("hide")},hide:function(){this.close()},handleShow:function(){this.$emit(i.DialogEvents.Show)},handleShown:function(){this.$emit(i.DialogEvents.Shown)},handleHide:function(){this.$emit(i.DialogEvents.Hide)},handleHidden:function(){this.$emit(i.DialogEvents.Hidden)},handleButtonClick:function(e,t){t.preventDefault(),t.stopPropagation(),e.close&&this.close();var n=Array.prototype.slice.call(arguments);n.push(this),this.$$emit(i.DialogEvents.ButtonClick,n)}},mounted:function(){var e=this;this.$nextTick(function(){e.$dialog().on("show.bs.modal",e.handleShow).on("shown.bs.modal",e.handleShown).on("hide.bs.modal",e.handleHide).on("hidden.bs.modal",e.handleHidden),$(e.$el).children(".dialog-trigger").children().attr("data-toggle","modal").attr("data-target","#"+e.dialogId),e.autoShow&&e.show()})},beforeDestroy:function(){this.$dialog().off("show.bs.modal").off("shown.bs.modal").off("hide.bs.modal").off("hidden.bs.modal")}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"axis",props:{type:{type:String,validator:function(e){return["horizontal","vertical"].indexOf(e)>-1},default:"horizontal"},from:{type:Number},to:{type:Number},rulerLength:{type:Number},height:{type:Number},x:{type:Number},y:{type:Number},cellWidth:{type:Number},count:{type:Number}},computed:{lines:function(){return _.range(this.count+1)},length:function(){return this.cellWidth*this.count}},methods:{getClipPath:function(e){return"horizontal"===e?"url(#xAxisMask)":"url(#yAxisMask)"},makeRange:function(e){return _.range(Math.floor(this.lines.length/e)+1)},getRulerPos:function(e){return this.cellWidth*e},getRulerLength:function(e){var t=5,n=this.rulerLength;return e%(2*t)===0?.375*n:e%t===0?.25*n:.125*n}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=i(o),a=n(143),s=i(a),l=n(144),c=i(l),u=n(145),d=i(u),f=n(1),p=n(11),h=n(2),v=h.prefix,m=h.isLayerVisible,y=h.findLayer;t.default={name:"b-canvas",components:{Grid:s.default,Indicator:c.default,Layers:d.default},props:{rect:{type:Object},viewPort:{type:Object},columns:{type:Number},rows:{type:Number},cellWidth:{type:Number},cursor:{type:String}},computed:(0,r.default)({},(0,f.resourceMapGetters)(["mousePosition","pencilColor","pencilSize","eraserSize","currentTool","mouseInCanvas","currentLayer","layers","onlyLayer","editorMargin","usedColors","colorStatics"],v),{indicatorColor:function(){switch(p.items[this.currentTool].name){case"pencil":return this.pencilColor;case"eraser":return{hex:"#000000"}}},indicatorSize:function(){switch(p.items[this.currentTool].name){case"pencil":return this.pencilSize*this.cellWidth;case"eraser":return this.eraserSize*this.cellWidth}},indicatorPosition:function(){var e=1;switch(p.items[this.currentTool].name){case"pencil":e=this.pencilSize;break;case"eraser":e=this.eraserSize}return{x:(this.mousePosition.column-Math.floor((e-1)/2))*this.cellWidth,y:(this.mousePosition.row-Math.floor((e-1)/2))*this.cellWidth}},indicatorVisible:function(){if(!this.mouseInCanvas)return!1;if(!this.currentLayer)return!1;var e=y(this.layers,this.currentLayer);if(!m(e))return!1;switch(p.items[this.currentTool].name){case"pencil":case"eraser":return!0;default:return!1}}}),methods:(0,r.default)({},(0,f.resourceMapActions)(["setMouseDown","setMousePosition","toggleMouseInOut"],v),{getPosition:function(e){var t=$(this.$refs.canvas).position(),n=e.pageX-t.left,i=e.pageY-t.top,o={x:n,y:i};return o},getCell:function(e){var t=this.getPosition(e),n=t.x,i=t.y;return{x:Math.floor(n/this.cellWidth),y:Math.floor(i/this.cellWidth)}},handleClick:function(e){var t=this.getCell(e);this.$fire("bead-canvas:click",e,t)},handleMouseDown:function(e){$(window).on("mouseup",this.handleMouseUp);var t=document.getElementById("canvas-bg").getBoundingClientRect();this.setMouseDown({isDown:!0,position:{px:e.pageX,py:e.pageY,x:e.pageX-t.left,y:e.pageY-t.top,column:Math.floor((e.pageX-t.left)/this.cellWidth+this.viewPort.x1),row:Math.floor((e.pageY-t.top)/this.cellWidth+this.viewPort.y1)},viewPort:_.clone(this.viewPort),event:e})},handleGlobalMouseMove:function(e){var t=this.$el.getBoundingClientRect(),n={px:e.pageX,py:e.pageY};n.x=n.px-t.left,n.y=n.py-t.top,n.rx=n.x-this.viewPort.x1*this.cellWidth,n.ry=n.y-this.viewPort.y1*this.cellWidth,this.$fire("bead-canvas:mousemove",n)},handleMouseUp:function(e){$(window).off("mouseup",this.handleMouseUp),this.setMouseDown({isDown:!1})},handleMouseMove:function(e){var t=document.getElementById("canvas-bg").getBoundingClientRect(),n=e.x-t.left,i=e.y-t.top,o=Math.floor(n/this.cellWidth+this.viewPort.x1),r=Math.floor(i/this.cellWidth+this.viewPort.y1),a={x:n,y:i,column:o,row:r};this.setMousePosition({position:a,event:e})},handleMouseOut:function(){this.toggleMouseInOut(!1)},handleMouseIn:function(){this.toggleMouseInOut(!0)}}),mounted:function(){var e=this;this.$nextTick(function(){$(window).on("mousemove",e.handleGlobalMouseMove)})},beforeDestroy:function(){$(window).off("mousemove",this.handleGlobalMouseMove)}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(140),r=i(o),a=n(141),s=i(a);t.default={name:"editor",props:{width:{type:Number,required:!0},height:{type:Number,required:!0},columns:{type:Number,required:!0},rows:{type:Number,required:!0},margin:{type:Array,default:function(){return[30,30]}},innerSize:{type:Object},cellWidth:{type:Number},viewPort:{type:Object},canvasRect:{type:Object},cursor:{type:String}},components:{Axis:r.default,BCanvas:s.default},data:function(){return{}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"grid",components:{},props:{columns:{type:Number},rows:{type:Number},cellWidth:{type:Number},showLine:{type:Boolean},showDot:{type:Boolean}},vuex:{actions:{},getters:{}},data:function(){return{}},computed:{width:function(){return this.columns*this.cellWidth},height:function(){return this.rows*this.cellWidth},xCells:function(){return _.range(0,this.columns+1)},yCells:function(){return _.range(0,this.rows+1)},cells:function(){return _.range(0,this.columns*this.rows)}},methods:{getLineClass:function(e){var t=5,n=["minor-line"];return e%t===0&&n.push("emphsis-line"),e%(2*t)===0&&n.push("major-line"),n},getCellCenter:function(e){var t=e%this.columns,n=Math.floor(e/this.columns);return{x:t*this.cellWidth+this.cellWidth/2,y:n*this.cellWidth+this.cellWidth/2
}},getCellPosition:function(e){var t=e%this.columns,n=Math.floor(e/this.columns);return{x:t*this.cellWidth,y:n*this.cellWidth}},getCellClass:function(e){var t=e%this.columns,n=Math.floor(e/this.columns),i=0;return(n%2===0&&t%2===0||n%2===1&&t%2===1)&&(i=1),i?"cell-gray":"cell-white"}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"grid",components:{},props:["position","size","color"],computed:{},methods:{}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"layer",props:["layer","cellWidth","visible","preview"],data:function(){return{}},computed:{cells:function(){return _.values(this.layer.data)}},methods:{}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(44),r=i(o),a=n(2),s=a.isLayerVisible;t.default={name:"layers",components:{Layer:r.default},props:["layers","cellWidth","onlyLayer"],data:function(){return{}},computed:{reverseLayers:function(){return _.reverse(this.layers.slice())}},methods:{isLayerVisible:function(e){return s(e)}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=i(o),a=n(27),s=i(a),l=n(1),c=n(2),u=c.prefix;t.default={name:"info-panel",components:{"bs-dialog":s.default},props:["dimension","size"],data:function(){return{columns:this.size.columns,rows:this.size.rows,width:this.dimension.width,height:this.dimension.height}},computed:(0,r.default)({},(0,l.resourceMapGetters)(["mousePosition"],u)),methods:(0,r.default)({},(0,l.resourceMapActions)(["setEditorDimension","setEditorSize"],u),{handleSizeDialogButton:function(e,t,n){"cancel"===e.name?(this.width=this.size.columns,this.height=this.size.rows):"save"===e.name&&this.setEditorSize({columns:Number(this.columns),rows:Number(this.rows)}),n.close()},handleDimensionDialogButton:function(e,t,n){"cancel"===e.name?(this.width=this.dimension.width,this.height=this.dimension.height):"save"===e.name&&this.setEditorDimension({width:Number(this.width),height:Number(this.height)}),n.close()}}),watch:{dimension:function(e,t){this.width=e.width,this.height=e.height},size:function(e){this.columns=e.columns,this.rows=e.rows}},route:{}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=i(o),a=n(149),s=i(a),l=n(1),c=n(2),u=c.prefix;t.default={name:"layer-item",props:["layer"],components:{Preview:s.default},computed:(0,r.default)({},(0,l.resourceMapGetters)(["onlyLayer","currentLayer","chainStatuses"],u)),methods:(0,r.default)({},(0,l.resourceMapActions)(["copyLayer","chainLayer","toggleLayerStatus"],u),{isChainDisabled:function(e){return!this.currentLayer||this.currentLayer===e},getChainClassName:function(e){return this.chainStatuses[e]?"fa-link":"fa-unlink"}}),data:function(){return{}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=i(o),a=n(1),s=n(179),l=i(s),c=n(147),u=i(c),d=n(27),f=i(d),p=n(2),h=p.prefix,v=p.isLayerVisible;t.default={name:"layers-panel",components:{Draggable:l.default,Layer:u.default,"bs-dialog":f.default},data:function(){return{height:0,editLayer:{id:"",name:""}}},computed:(0,r.default)({},(0,a.resourceMapGetters)(["layers","currentLayer","onlyLayer","chainStatuses","currentChain"],h),{fakeLayers:function(){return this.layers.slice()}}),methods:(0,r.default)({},(0,a.resourceMapActions)(["insertLayer","removeLayer","setLayers","setCurrentLayer","toggleCurrentLayer","updateLayer","mergeLayers"],h),{isLayerVisible:function(e){return v(e)},handleMerge:function(){this.mergeLayers({currentLayer:this.currentLayer,chain:this.currentChain})},handleRemove:function(){this.currentLayer&&this.removeLayer(this.currentLayer)},handleInsert:function(){this.insertLayer(this.currentLayer)},handleResize:function(){var e=window.document.documentElement.clientHeight,t=e-$("#panel-tabs").get(0).getBoundingClientRect().height-$(".layers-panel .panel-heading").get(0).getBoundingClientRect().height-$(".layers-panel .btn-toolbar").get(0).getBoundingClientRect().height;this.height=t},handleSort:function(e){if(e.moved){var t=this.layers.slice(),n=t.splice(e.moved.oldIndex,1);t.splice(e.moved.newIndex,0,n[0]),this.setLayers(t)}},handleLayerNameButton:function(e,t,n){this.editLayer.name.trim().length>0&&(this.updateLayer({id:this.editLayer.id,data:{name:this.editLayer.name.trim()}}),n.close())},handleLayerNameEdit:function(e){var t=this;this.editLayer.id=e.id,this.editLayer.name=e.name,this.$refs.dialog.show(),this.$nextTick(function(){return t.$refs.input.focus()})}}),created:function(){$(window).on("resize",this.handleResize)},mounted:function(){this.$nextTick(this.handleResize)},beforeDestroy:function(){$(window).off("resize",this.handleResize)}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=i(o),a=n(44),s=i(a),l=n(1),c=n(2),u=c.prefix;t.default={name:"layer-preview",props:["layer"],components:{Layer:s.default},data:function(){return{}},computed:(0,r.default)({},(0,l.resourceMapGetters)(["editorSize","editorDimension"],u),{cellWidth:function(){return Math.min(48/this.editorSize.columns,48/this.editorSize.rows)}}),methods:{}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=i(o),a=n(43),s=n(1),l=n(2),c=l.prefix;t.default={name:"toolbar-panel",components:{"color-picker":a.Chrome},data:function(){return{color:{hex:"#000000"},show:!1}},computed:(0,r.default)({},(0,s.resourceMapGetters)(["pencilColor","pencilSize","eraserSize","usedColors"],c),{readableColor:function(){return this.pencilColor.hex},sizeRange:function(){return _.range(1,10)},readablePencilSize:function(){return this.pencilSize+" x "+this.pencilSize},readableEraserSize:function(){return this.eraserSize+" x "+this.eraserSize}}),methods:(0,r.default)({},(0,s.resourceMapActions)(["setPencilColor","setPencilSize","setEraserSize"],c),{handlePickClick:function(){this.show=!0},handleColorChange:function(e){this.setPencilColor(e)},handleClickGlobal:function(e){this.show&&0===$(e.target).parents(".color-picker-layer").length&&(this.show=!1)}}),created:function(){$(window).on("click",this.handleClickGlobal)},beforeDestroy:function(){$(window).off("click",this.handleClickGlobal)}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"item",props:{className:{type:String},name:{type:String},highlight:{type:Boolean},tips:{type:String}},data:function(){return{}},computed:{},methods:{handleClick:function(e){this.$emit("click",e)},handleDblclick:function(e){this.$emit("dblclick",e)}},route:{}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=i(o),a=n(151),s=i(a),l=n(11),c=n(1),u=n(2),d=u.prefix;t.default={name:"toolbar",components:{Item:s.default},props:{current:{type:Number,default:0}},data:function(){return{items:l.items.slice()}},computed:(0,r.default)({},(0,c.resourceMapGetters)(["altKey"],d)),methods:(0,r.default)({},(0,c.resourceMapActions)(["setCurrentTool","setAltKey"],d),{handleItemClick:function(e){e!==this.current&&(this.$emit("toolbar:itemClick"),this.setCurrentTool(e))},handleItemDoubleClick:function(e){this.$fire("toolbar:itemDblclick")},handleKeyDown:function(e){e.altKey&&this.setAltKey(!0);var t=_.findIndex(l.items,function(t){return t.hotKey.toUpperCase()===e.key.toUpperCase()});t>-1&&this.setCurrentTool(t),$(window).on("keyup",this.handleKeyUp)},handleKeyUp:function(e){!e.altKey&&this.altKey&&this.setAltKey(!1),$(window).off("keyup",this.handleKeyUp)}}),mounted:function(){var e=this;this.$nextTick(function(){$(window).on("keydown",e.handleKeyDown)})},beforeDestroy:function(){$(window).off("keydown",this.handleKeyDown),$(window).off("keyup",this.handleKeyUp)}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"bar_page"}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"foo_page"}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(137),r=i(o);t.default={name:"home_page",components:{BeadApp:r.default}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,function(e,t,n){var i,o;n(111),i=n(51);var r=n(156);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,e.exports=i},function(e,t,n){var i,o;n(129),i=n(52);var r=n(174);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-ba957ea8",e.exports=i},function(e,t,n){var i,o;n(116),i=n(53);var r=n(161);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-3e206236",e.exports=i},function(e,t,n){var i,o;n(118),i=n(54);var r=n(163);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-470f1ed4",e.exports=i},function(e,t,n){var i,o;n(127),i=n(56);var r=n(172);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-9c311b7e",e.exports=i},function(e,t,n){var i,o;n(121),i=n(57);var r=n(166);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-69164a78",e.exports=i},function(e,t,n){var i,o;n(126),i=n(58);var r=n(171);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-95cc37e6",e.exports=i},function(e,t,n){var i,o;n(115),i=n(59);var r=n(160);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-3a148934",e.exports=i},function(e,t,n){var i,o;n(113),i=n(60);var r=n(158);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-20e6559f",e.exports=i},function(e,t,n){var i,o;n(112),i=n(62);var r=n(157);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-1010a562",e.exports=i},function(e,t,n){var i,o;n(123),i=n(63);var r=n(168);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-73917d57",e.exports=i},function(e,t,n){var i,o;n(131),i=n(64);var r=n(176);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-f5faf4a6",e.exports=i},function(e,t,n){var i,o;n(124),i=n(65);var r=n(169);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-753e75e6",e.exports=i},function(e,t,n){var i,o;n(128),i=n(66);var r=n(173);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-a59200b8",e.exports=i},function(e,t,n){var i,o;n(125),i=n(67);var r=n(170);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-7a40bf70",e.exports=i},function(e,t,n){var i,o;n(117),i=n(68);var r=n(162);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-43e6bad9",e.exports=i},function(e,t,n){var i,o;n(119),i=n(69);var r=n(164);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-5d261325",e.exports=i},function(e,t,n){var i,o;n(130),i=n(70);var r=n(175);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-d450873e",e.exports=i},function(e,t,n){var i,o;n(132),i=n(71);var r=n(177);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-fdab88d8",e.exports=i},function(e,t,n){var i,o;n(122),i=n(72);var r=n(167);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-735c3781",e.exports=i},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid",staticStyle:{padding:"0"}},[n("div",{attrs:{id:"app"}},[n("router-view")],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",e._l(e.reverseLayers,function(t,i){return n("layer",{attrs:{layer:t,"cell-width":e.cellWidth,visible:e.isLayerVisible(t)}})}))},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{attrs:{transform:e.getTranslate(e.position.x,e.position.y)}},[n("rect",{style:{opacity:.25,fill:e.color.hex},attrs:{x:"0",y:"0",width:e.size,height:e.size}})])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("span",{staticClass:"dialog-trigger"},[e._t("trigger")],2),e._v(" "),n("div",{staticClass:"modal",attrs:{id:e.dialogId,tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel"}},[n("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),n("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[e._v(e._s(e.title))])]),e._v(" "),n("div",{staticClass:"modal-body"},[e._t("dialog-body")],2),e._v(" "),n("div",{staticClass:"modal-footer"},e._l(e.buttons,function(t){return n("button",{class:"btn btn-"+t.type,attrs:{type:"button","data-dismiss":"modal"},on:{click:function(n){e.handleButtonClick(t,n)}}},[e._v("\n            "+e._s(t.label)+"\n          ")])}))])])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{staticStyle:{"stroke-width":"1px",stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.3)"}},[n("rect",{attrs:{x:0,width:e.cellWidth*e.columns,y:0,height:e.cellWidth*e.rows,fill:"rgba(255, 255, 255, 0)"}}),e._v(" "),e._l(e.yCells,function(t,i){return n("line",{class:e.getLineClass(i),attrs:{x1:0,x2:e.width,y1:e.cellWidth*i,y2:e.cellWidth*i}})}),e._v(" "),e._l(e.xCells,function(t,i){return n("line",{class:e.getLineClass(i),attrs:{y1:0,y2:e.height,x1:e.cellWidth*i,x2:e.cellWidth*i}})})],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"color-mapping-panel side-panel panel panel-default color-mapping-panel",staticStyle:{"margin-bottom":"0",position:"relative"}},[e._m(0),e._v(" "),n("ul",{staticClass:"list-group",staticStyle:{"overflow-y":"auto"},style:{height:e.height+"px"}},e._l(e.colorStatics.colors,function(t,i){return n("li",{staticClass:"list-group-item"},[n("div",{staticClass:"btn-group btn-group-xs"},[n("a",{staticClass:"color-block dropdown-toggle",style:{"background-color":i},attrs:{href:"###","data-toggle":"dropdown"}}),e._v(" "),n("ul",{staticClass:"dropdown-menu",attrs:{role:"menu"}},[n("li",[n("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.handleResetColorDialogOpen(t)}}},[e._v("\n              重设颜色\n            ")])]),e._v(" "),n("li",[n("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.generateLayerFromColor({color:i})}}},[e._v("\n              创建图层\n            ")])]),e._v(" "),n("li",{staticClass:"divider",attrs:{role:"separator"}}),e._v(" "),n("li",[n("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.removeColor({color:i})}}},[e._v("\n              清除\n            ")])])])]),e._v("\n      "+e._s(i)+" "),n("span",{staticClass:"badge"},[e._v(e._s(t))])])})),e._v(" "),n("reset-color-dialog",{ref:"resetColorDialog"})],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-heading"},[n("h3",{staticClass:"panel-title"},[e._v("颜色映射")])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"btn btn-default",class:{icon:!0,"tb-highlight":e.highlight},attrs:{type:"button",title:e.tips},on:{click:e.handleClick,dblclick:e.handleDblclick}},[n("i",{staticClass:"fa",class:(i={},i[e.className]=!0,i),attrs:{"aria-hidden":"true"}})]);var i},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("bs-dialog",{ref:"dialog",attrs:{title:"重设颜色","dialog-id":"dimension-dialog"},on:{"dialog:btn-click":e.handleDialogButton}},[n("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault()}},slot:"trigger"},[n("span",[e._v("重设颜色")])]),e._v(" "),n("div",{slot:"dialog-body"},[n("color-picker",{directives:[{name:"model",rawName:"v-model",value:e.color,expression:"color"}],domProps:{value:e.color},on:{"change-color":e.handleColorChange,input:function(t){e.color=t}}})],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"btn-toolbar",staticStyle:{position:"fixed",top:"0",left:"0"}},[n("div",{staticClass:"btn-group-vertical",staticStyle:{"font-size":"16px"}},e._l(e.items,function(t,i){return n("item",{attrs:{"class-name":t.icon,name:t.name,tips:t.tips,highlight:e.current===i},on:{click:function(t){e.handleItemClick(i)},dblclick:function(t){e.handleItemDoubleClick(i)}}})}))])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("g",{attrs:{transform:e.getTranslate(e.layer.translation.x*e.cellWidth,e.layer.translation.y*e.cellWidth)}},[e._l(e.cells,function(t){return e.preview?e._e():n("circle",{style:{stroke:t.color,strokeWidth:.35*e.cellWidth,fill:"rgba(0,0,0,0)"},attrs:{cx:t.x*e.cellWidth+e.cellWidth/2,cy:t.y*e.cellWidth+e.cellWidth/2,r:.3*e.cellWidth}})}),e._v(" "),e._l(e.cells,function(t){return e.preview?n("rect",{style:{fill:t.color},attrs:{x:t.x*e.cellWidth,y:t.y*e.cellWidth,width:e.cellWidth,height:e.cellWidth}}):e._e()})],2):e._e()},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{style:{cursor:e.cursor},attrs:{transform:e.getTranslate(e.rect.x,e.rect.y),"clip-path":"url(#canvasMask)"}},[n("g",{ref:"canvas",attrs:{transform:e.getTranslate(-e.viewPort.x1*e.cellWidth,-e.viewPort.y1*e.cellWidth)},on:{click:e.handleClick,mousedown:e.handleMouseDown,mousemove:e.handleMouseMove,mouseleave:e.handleMouseOut,mouseenter:e.handleMouseIn}},[n("layers",{attrs:{layers:e.layers,"cell-width":e.cellWidth,"only-layer":e.onlyLayer}}),e._v(" "),n("grid",{attrs:{columns:e.columns,rows:e.rows,"cell-width":e.cellWidth,"show-line":!0,"show-dot":!0}}),e._v(" "),e.indicatorVisible?n("indicator",{attrs:{position:e.indicatorPosition,size:e.indicatorSize,color:e.indicatorColor}}):e._e()],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("bead-app")],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"side-panel panel panel-default info-panel",staticStyle:{"margin-bottom":"0"}},[e._m(0),e._v(" "),n("ul",{staticClass:"list-group"},[n("li",{staticClass:"list-group-item"},[e._v("\n      尺寸\n      "),n("bs-dialog",{attrs:{title:"尺寸设置","dialog-id":"size-dialog"},on:{"dialog:btn-click":e.handleSizeDialogButton}},[n("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault()}},slot:"trigger"},[n("span",[e._v(e._s(e.size.columns))]),e._v(" x "),n("span",[e._v(e._s(e.size.rows))])]),e._v(" "),n("div",{slot:"dialog-body"},[n("form",{staticClass:"form-inline",attrs:{role:"form"}},[n("div",{staticClass:"form-group"},[n("div",{staticClass:"input-group"},[n("div",{staticClass:"input-group-addon"},[e._v("列")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.columns,expression:"columns"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:e._s(e.columns)},on:{keydown:function(e){e.stopPropagation()},keyup:function(e){e.stopPropagation()},keypress:function(e){e.stopPropagation()},input:function(t){t.target.composing||(e.columns=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),n("div",{staticClass:"form-group"},[n("div",{staticClass:"input-group"},[n("div",{staticClass:"input-group-addon"},[e._v("行")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.rows,expression:"rows"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:e._s(e.rows)},on:{keydown:function(e){e.stopPropagation()},keyup:function(e){e.stopPropagation()},keypress:function(e){e.stopPropagation()},input:function(t){t.target.composing||(e.rows=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})])])])])])],1),e._v(" "),n("li",{staticClass:"list-group-item"},[e._v("\n      宽高\n      "),n("bs-dialog",{attrs:{title:"宽高设置","dialog-id":"dimension-dialog"},on:{"dialog:btn-click":e.handleDimensionDialogButton}},[n("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault()}},slot:"trigger"},[n("span",[e._v(e._s(e.dimension.width))]),e._v(" x "),n("span",[e._v(e._s(e.dimension.height))])]),e._v(" "),n("div",{slot:"dialog-body"},[n("form",{staticClass:"form-inline",attrs:{role:"form"}},[n("div",{staticClass:"form-group"},[n("div",{staticClass:"input-group"},[n("div",{staticClass:"input-group-addon"},[e._v("宽")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.width,expression:"width"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:e._s(e.width)},on:{keydown:function(e){e.stopPropagation()},keyup:function(e){e.stopPropagation()},keypress:function(e){e.stopPropagation()},input:function(t){t.target.composing||(e.width=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),n("div",{staticClass:"form-group"},[n("div",{staticClass:"input-group"},[n("div",{staticClass:"input-group-addon"},[e._v("高")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.height,expression:"height"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:e._s(e.height)},on:{keydown:function(e){e.stopPropagation()},keyup:function(e){e.stopPropagation()},keypress:function(e){e.stopPropagation()},input:function(t){t.target.composing||(e.height=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})])])])])])],1),e._v(" "),n("li",{staticClass:"list-group-item"},[e._v("\n      C: "),n("span",[e._v(e._s(e.mousePosition.column))]),e._v("\n      R: "),n("span",[e._v(e._s(e.mousePosition.row))])])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-heading"},[n("h3",{staticClass:"panel-title"},[e._v("画布设置")])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"side-panel panel panel-default layers-panel",staticStyle:{"margin-bottom":"0",position:"relative"}},[e._m(0),e._v(" "),n("ul",{staticClass:"list-group",staticStyle:{"overflow-y":"auto"},style:{height:e.height+"px"}},[n("draggable",{attrs:{list:e.fakeLayers},on:{change:e.handleSort}},e._l(e.layers,function(t,i){return n("li",{staticClass:"list-group-item layer",class:{highlight:t.id===e.currentLayer,"layer-invisible":!e.isLayerVisible(t),"layer-chained":e.chainStatuses[t.id]},on:{click:function(n){e.toggleCurrentLayer(t.id)}}},[n("layer",{attrs:{layer:t},on:{"name-edit":function(n){e.handleLayerNameEdit(t)}}})],1)}))],1),e._v(" "),n("div",{staticClass:"btn-toolbar"},[n("div",{staticClass:"btn-group"},[n("button",{staticClass:"btn btn-default layer-btn",attrs:{type:"button",title:"插入层"},on:{click:e.handleInsert}},[n("i",{staticClass:"fa fa-plus"})]),e._v(" "),n("button",{staticClass:"btn btn-default layer-btn",attrs:{type:"button",disabled:!e.currentChain,title:"合并层"},on:{click:e.handleMerge}},[n("i",{staticClass:"fa fa-object-group"})]),e._v(" "),n("button",{staticClass:"btn btn-default layer-btn",attrs:{type:"button",disabled:!e.currentLayer,title:"删除层"},on:{click:e.handleRemove}},[n("i",{staticClass:"fa fa-trash-o"})])])]),e._v(" "),n("bs-dialog",{ref:"dialog",attrs:{title:"设置层名称","dialog-id":"size-dialog"},on:{"dialog:btn-click":e.handleLayerNameButton}},[n("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault()}},slot:"trigger"},[n("span")]),e._v(" "),n("div",{slot:"dialog-body"},[n("form",{staticClass:"form-horizontal",attrs:{role:"form"},on:{submit:function(e){e.preventDefault()}}},[n("div",{staticClass:"form-group"},[n("label",{staticClass:"col-sm-2 control-label",attrs:{for:"title"}},[e._v("名称")]),e._v(" "),n("div",{staticClass:"col-sm-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.editLayer.name,expression:"editLayer.name"}],ref:"input",staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"层名称"},domProps:{value:e._s(e.editLayer.name)},on:{keydown:function(e){e.stopPropagation()},keyup:function(e){e.stopPropagation()},keypress:function(e){e.stopPropagation()},input:function(t){t.target.composing||(e.editLayer.name=t.target.value)}}})])])])])])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-heading"},[n("h3",{staticClass:"panel-title"},[e._v("层")])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"side-panel panel panel-default toolbar-panel",staticStyle:{"margin-bottom":"0",position:"relative"}},[e._m(0),e._v(" "),n("ul",{staticClass:"list-group"},[n("li",{staticClass:"list-group-item"},[e._v("\n      颜色\n      "),e._v(" "),n("span",{staticClass:"color-block",style:{"background-color":e.pencilColor.hex},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.handlePickClick(t)}}}),e._v(" "),n("span",{domProps:{innerHTML:e._s(e.readableColor)}})]),e._v(" "),n("li",{staticClass:"list-group-item"},e._l(e.usedColors,function(t){return n("span",{staticClass:"color-block",style:{"background-color":t},on:{click:function(n){n.stopPropagation(),n.preventDefault(),e.handleColorChange({hex:t})}}})})),e._v(" "),n("li",{staticClass:"list-group-item"},[e._v("\n      笔触\n      "),n("div",{staticClass:"btn-group btn-group-xs"},[n("a",{attrs:{"data-toggle":"dropdown",href:"###"}},[e._v(e._s(e.readablePencilSize))]),e._v(" "),n("ul",{staticClass:"dropdown-menu",attrs:{role:"menu"}},e._l(e.sizeRange,function(t){return n("li",{on:{click:function(n){n.preventDefault(),e.setPencilSize(t)}}},[n("a",{attrs:{href:"#"}},[e._v("\n            "+e._s(t)+" x "+e._s(t)+"\n            "),t===e.pencilSize?n("i",{staticClass:"fa fa-circle pull-right",staticStyle:{color:"gray"},attrs:{"aria-hidden":"true"}}):e._e()])])}))])]),e._v(" "),n("li",{staticClass:"list-group-item"},[e._v("\n      笔擦\n      "),n("div",{staticClass:"btn-group btn-group-xs"},[n("a",{attrs:{"data-toggle":"dropdown",href:"###"}},[e._v(e._s(e.readableEraserSize))]),e._v(" "),n("ul",{staticClass:"dropdown-menu",attrs:{role:"menu"}},e._l(e.sizeRange,function(t){return n("li",{on:{click:function(n){n.preventDefault(),e.setEraserSize(t)}}},[n("a",{attrs:{href:"#"}},[e._v("\n            "+e._s(t)+" x "+e._s(t)+"\n            "),t===e.eraserSize?n("i",{staticClass:"fa fa-circle pull-right",staticStyle:{color:"gray"},attrs:{"aria-hidden":"true"}}):e._e()])])}))])])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"color-picker-layer",staticStyle:{position:"absolute",top:"74px"}},[n("color-picker",{directives:[{name:"model",rawName:"v-model",value:e.color,expression:"color"}],domProps:{value:e.color},on:{"change-color":e.handleColorChange,input:function(t){e.color=t}}})],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-heading"},[n("h3",{staticClass:"panel-title"},[e._v("工具设置")])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{width:e.width,height:e.height}},[n("defs",[n("clipPath",{attrs:{id:"xAxisMask"}},[n("rect",{attrs:{x:0,y:-e.margin[1],width:e.innerSize.width,height:e.margin[1]}})]),e._v(" "),n("clipPath",{attrs:{id:"yAxisMask"}},[n("rect",{attrs:{x:-e.margin[0],y:0,width:e.margin[0],height:e.innerSize.height}})]),e._v(" "),n("clipPath",{attrs:{id:"canvasMask"}},[n("rect",{attrs:{x:0,y:0,width:e.canvasRect.width,height:e.canvasRect.height}})]),e._v(" "),n("pattern",{attrs:{id:"transparentBackground",x:"0",y:"0",width:"20",height:"20",patternUnits:"userSpaceOnUse"}},[n("image",{attrs:{width:"20",height:"20","xlink:href":"./static/assets/t.png"}})])]),e._v(" "),n("rect",{attrs:{id:"canvas-bg",x:e.canvasRect.x,y:e.canvasRect.y,width:e.canvasRect.width,height:e.canvasRect.height,fill:"white"}}),e._v(" "),n("axis",{attrs:{type:"horizontal",x:e.canvasRect.x,y:e.canvasRect.y,"ruler-length":e.margin[0],from:e.viewPort.x1,to:e.viewPort.x2,"cell-width":e.cellWidth,count:e.columns}}),e._v(" "),n("axis",{attrs:{type:"vertical",x:e.canvasRect.x,y:e.canvasRect.y,"ruler-length":e.margin[1],from:e.viewPort.y1,to:e.viewPort.y2,"cell-width":e.cellWidth,count:e.rows}}),e._v(" "),n("b-canvas",{attrs:{rect:e.canvasRect,"cell-width":e.cellWidth,"view-port":e.viewPort,columns:e.columns,rows:e.rows,cursor:e.cursor}})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",{staticStyle:{stroke:"black","stroke-width":"1px"},attrs:{transform:e.getTranslate(e.x,e.y),"clip-path":e.getClipPath(e.type)
}},["horizontal"==e.type?n("g",{attrs:{transform:e.getTranslate(-e.from*e.cellWidth,0)}},[n("line",{attrs:{x1:0,y1:0,x2:e.length,y2:0}}),e._v(" "),e._l(e.lines,function(t,i){return n("line",{attrs:{x1:e.getRulerPos(i),x2:e.getRulerPos(i),y1:0,y2:-e.getRulerLength(t)}})}),e._v(" "),e._l(e.makeRange(10),function(t,i){return n("text",{staticStyle:{fill:"#999999",stroke:"#000000"},style:{fontSize:8},attrs:{x:e.getRulerPos(10*i),y:-14,"text-anchor":"start"}},[e._v(e._s(10*i))])})],2):e._e(),e._v(" "),"vertical"==e.type?n("g",{attrs:{transform:e.getTranslate(0,-e.from*e.cellWidth)}},[n("line",{attrs:{x1:0,y1:0,x2:0,y2:e.length}}),e._v(" "),e._l(e.lines,function(t,i){return n("line",{attrs:{y1:e.getRulerPos(i),y2:e.getRulerPos(i),x1:0,x2:-e.getRulerLength(t)}})}),e._v(" "),e._l(e.makeRange(10),function(t,i){return n("text",{staticStyle:{fill:"#999999",stroke:"#000000"},style:{fontSize:8},attrs:{x:10*-i*e.cellWidth,y:-14,"text-anchor":"end",transform:"rotate(270)"}},[e._v(e._s(10*i))])})],2):e._e()])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"preview"},[n("layer",{attrs:{layer:e.layer,"cell-width":e.cellWidth,preview:!0,visible:!0}})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("toolbar",{attrs:{current:e.currentTool}}),e._v(" "),n("div",{staticClass:"row",style:{"margin-left":e.leftMargin+"px"}},[n("div",{staticClass:"col-xs-10",staticStyle:{overflow:"auto","border-left":"2px outset","border-right":"2px inset",background:"#fafafa",padding:"0","text-align":"center"},style:{height:e.windowHeight+"px",width:e.windowWidth-e.leftMargin-e.rightColumnWidth+2+"px"}},[n("editor",{attrs:{width:e.editorDimension.width,height:e.editorDimension.height,columns:e.editorSize.columns,rows:e.editorSize.rows,"unit-width":e.editorUnitWidth,"cell-width":e.editorCellWidth,zoom:e.editorZoom,margin:e.editorMargin,"inner-size":e.editorInnerSize,"view-port":e.editorViewPort,"canvas-rect":e.canvasRect,cursor:e.editorCursor}})],1),e._v(" "),n("div",{staticClass:"col-xs-2",staticStyle:{padding:"0"},style:{width:e.rightColumnWidth+"px"}},[n("ul",{staticClass:"nav nav-tabs nav-tabs-xs",staticStyle:{"border-bottom":"0"},attrs:{id:"panel-tabs",role:"tablist"}},e._l(e.panels,function(t,i){return n("li",{class:i===e.currentPanelIndex?"active":"",attrs:{role:"presentation"}},[n("a",{class:i===e.currentPanelIndex?"":"panel-item",staticStyle:{padding:"3px 6px"},attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.handleChangePanel(i)}}},[n("i",{staticClass:"fa",class:t.className})])])})),e._v(" "),0===e.currentPanelIndex?n("info-panel",{attrs:{size:e.editorSize,dimension:e.editorDimension}}):e._e(),e._v(" "),1===e.currentPanelIndex?n("toolbar-panel"):e._e(),e._v(" "),2===e.currentPanelIndex?n("color-mapping-panel"):e._e(),e._v(" "),3===e.currentPanelIndex?n("layers-panel"):e._e()],1)])],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;e._self._c||t;return e._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("\nbar\n    "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")]),e._v(" "),n("p",[e._v("2")])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row",staticStyle:{height:"48px"}},[n("div",{staticClass:"col-xs-3"},[n("preview",{attrs:{layer:e.layer}})],1),e._v(" "),n("div",{staticClass:"col-xs-9"},[n("a",{staticStyle:{"line-height":"1.8em","text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap",width:"140px",display:"inline-block"},attrs:{href:"#"},on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.$emit("name-edit")}}},[e._v(e._s(e.layer.name))]),n("br"),e._v(" "),n("div",{staticClass:"btn-group btn-group-xs",on:{click:function(e){e.stopPropagation()}}},[n("button",{staticClass:"btn btn-default",attrs:{type:"button",disabled:!!e.onlyLayer},on:{click:function(t){t.stopPropagation(),e.toggleLayerStatus({status:"visible",id:e.layer.id})}}},[n("i",{staticClass:"fa",class:e.layer.status.visible?"fa-eye":"fa-eye-slash"})]),e._v(" "),n("button",{staticClass:"btn btn-default",attrs:{type:"button",disabled:!(!e.onlyLayer||e.onlyLayer&&e.onlyLayer===e.layer.id)},on:{click:function(t){t.stopPropagation(),e.toggleLayerStatus({status:"only",id:e.layer.id})}}},[n("i",{staticClass:"fa",class:e.layer.status.only?"fa-star":"fa-star-o"})]),e._v(" "),n("button",{staticClass:"btn btn-default",attrs:{type:"button",disabled:!e.onlyLayer||e.onlyLayer&&e.onlyLayer===e.layer.id},on:{click:function(t){t.stopPropagation(),e.toggleLayerStatus({status:"force",id:e.layer.id})}}},[n("i",{staticClass:"fa",class:e.layer.status.force?"fa-toggle-on":"fa-toggle-off"})]),e._v(" "),n("button",{staticClass:"btn btn-default",attrs:{type:"button",disabled:e.isChainDisabled(e.layer.id)},on:{click:function(t){t.stopPropagation(),e.chainLayer(e.layer.id)}}},[n("i",{staticClass:"fa",class:e.getChainClassName(e.layer.id)})]),e._v(" "),n("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(t){t.stopPropagation(),e.copyLayer(e.layer.id)}}},[n("i",{staticClass:"fa fa-copy"})])])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("\n  foo\n  "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),n("p",[e._v("1")]),e._v(" "),e._m(0),e._v(" "),n("router-view")],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{margin:"100px",width:"100px",padding:"100px",height:"100px","background-color":"#CCFFCE"}},[n("i",{staticClass:"fa fa-check-circle",staticStyle:{"font-size":"16px"},attrs:{"aria-hidden":"true"}})])}]}}]);
//# sourceMappingURL=app.63974457a5558712425a.js.map